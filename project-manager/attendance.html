<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Management - CPMS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/attendance.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-icon"><i class="fas fa-hard-hat"></i></span>
                <span class="logo-text">CPMS</span>
            </div>
            <button class="sidebar-toggle" id="sidebarToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>

        <div class="sidebar-menu">
            <a href="index.html" class="menu-item">
                <span class="menu-icon"><i class="fas fa-chart-bar"></i></span>
                <span class="menu-text">Dashboard</span>
            </a>
            <a href="tasks.html" class="menu-item">
                <span class="menu-icon"><i class="fas fa-tasks"></i></span>
                <span class="menu-text">Task Management</span>
            </a>
            <a href="requests.html" class="menu-item">
                <span class="menu-icon"><i class="fas fa-box"></i></span>
                <span class="menu-text">Material Requests</span>
            </a>
            <a href="financials.html" class="menu-item">
                <span class="menu-icon"><i class="fas fa-dollar-sign"></i></span>
                <span class="menu-text">Financial Statements</span>
            </a>
            <a href="attendance.html" class="menu-item active">
                <span class="menu-icon"><i class="fas fa-users"></i></span>
                <span class="menu-text">Attendance</span>
            </a>
            <a href="user-management.html" class="menu-item">
                <span class="menu-icon"><i class="fas fa-user-cog"></i></span>
                <span class="menu-text">User Management</span>
            </a>
        </div>
        <div class="sidebar-footer">
            <div class="user-profile">
                <div class="user-avatar">PM</div>
                <div class="user-info">
                    <div class="user-name">Project Manager</div>
                    <div class="user-role">Administrator</div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Header -->
        <header class="top-header">
            <div class="header-left">
                <h1 class="page-title">Attendance Management</h1>
                <p class="page-subtitle">Track workforce attendance and working hours</p>
            </div>
            <div class="header-right">
                <button class="btn-primary" onclick="markAttendance()">
                    <span><i class="fas fa-user-check"></i></span>
                    Mark Attendance
                </button>
                <div class="current-date" id="currentDate"></div>
            </div>
        </header>

        <!-- Attendance Content -->
        <div class="attendance-content">
            <!-- Attendance Statistics -->
            <section class="attendance-stats">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalEmployees">45</div>
                            <div class="stat-label">Total Employees</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-user-check"></i></div>
                        <div class="stat-content">
                            <div class="stat-number" id="presentToday">38</div>
                            <div class="stat-label">Present Today</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-user-times"></i></div>
                        <div class="stat-content">
                            <div class="stat-number" id="absentToday">7</div>
                            <div class="stat-label">Absent Today</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-percentage"></i></div>
                        <div class="stat-content">
                            <div class="stat-number" id="attendanceRate">84.4%</div>
                            <div class="stat-label">Attendance Rate</div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Attendance Filters -->
            <section class="attendance-filters">
                <div class="filters-left">
                    <div class="filter-group">
                        <label for="dateFilter">Date:</label>
                        <input type="date" id="dateFilter" value="">
                    </div>
                    <div class="filter-group">
                        <label for="projectFilter">Project:</label>
                        <select id="projectFilter">
                            <option value="">All Projects</option>
                            <option value="abaymado">Abaymado Apartments</option>
                            <option value="unity">Unity Bridge</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="departmentFilter">Department:</label>
                        <select id="departmentFilter">
                            <option value="">All Departments</option>
                            <option value="engineering">Engineering</option>
                            <option value="construction">Construction</option>
                            <option value="safety">Safety</option>
                            <option value="admin">Administration</option>
                        </select>
                    </div>
                </div>
                <div class="filters-right">
                    <input type="text" id="employeeSearch" placeholder="Search employees..." class="search-input">
                    <button class="export-btn" onclick="exportAttendance()">
                        <span><i class="fas fa-file-excel"></i></span>
                        Export
                    </button>
                </div>
            </section>

            <!-- Today's Attendance -->
            <section class="todays-attendance">
                <div class="attendance-header">
                    <h3>Today's Attendance</h3>
                    <div class="attendance-summary">
                        <span class="present-count">38 Present</span>
                        <span class="absent-count">7 Absent</span>
                        <span class="late-count">3 Late</span>
                    </div>
                </div>
                <div class="attendance-grid" id="attendanceGrid">
                    <!-- Attendance cards will be populated by JavaScript -->
                </div>
            </section>

            <!-- Attendance Table -->
            <section class="attendance-table-section">
                <div class="table-header">
                    <h3>Attendance Records</h3>
                    <div class="table-controls">
                        <select id="recordsPerPage">
                            <option value="10">10 per page</option>
                            <option value="25">25 per page</option>
                            <option value="50">50 per page</option>
                        </select>
                    </div>
                </div>
                <div class="attendance-table">
                    <table id="attendanceTable">
                        <thead>
                            <tr>
                                <th>Employee</th>
                                <th>Department</th>
                                <th>Project</th>
                                <th>Check In</th>
                                <th>Check Out</th>
                                <th>Hours Worked</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="attendanceTableBody">
                            <!-- Attendance records will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>
    <!-- Attendance Modal -->
    <div class="modal" id="attendanceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Mark Attendance</h3>
                <button class="modal-close" onclick="closeAttendanceModal()">&times;</button>
            </div>
            <form class="attendance-form" id="attendanceForm">
                <div class="form-group">
                    <label for="employeeSelect">Employee</label>
                    <select id="employeeSelect" required>
                        <option value="">Select Employee</option>
                        <option value="eng1">Eng. Bekele M.</option>
                        <option value="eng2">Eng. Samuel G.</option>
                        <option value="eng3">Eng. Yonas L.</option>
                        <option value="eng4">Eng. Lemlem M.</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="checkInTime">Check In Time</label>
                        <input type="time" id="checkInTime" required>
                    </div>
                    <div class="form-group">
                        <label for="checkOutTime">Check Out Time</label>
                        <input type="time" id="checkOutTime">
                    </div>
                </div>
                <div class="form-group">
                    <label for="attendanceStatus">Status</label>
                    <select id="attendanceStatus" required>
                        <option value="present">Present</option>
                        <option value="late">Late</option>
                        <option value="absent">Absent</option>
                        <option value="sick">Sick Leave</option>
                        <option value="vacation">Vacation</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="attendanceNotes">Notes</label>
                    <textarea id="attendanceNotes" rows="3" placeholder="Additional notes..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeAttendanceModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Save Attendance</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/dashboard.js"></script>
    <script src="js/data.js"></script>
</body>

</html>